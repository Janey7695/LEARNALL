### 一、特点
>LCD1602液晶显示器是广泛使用的一种字符型液晶显示模块。它是由字符型液晶显示屏（LCD）、控制驱动主电路HD44780及其扩展驱动电路HD44100，以及少量电阻、电容元件和结构件等装配在PCB板上而组成。不同厂家生产的LCD1602芯片可能有所不同，但使用方法都是一样的。为了降低成本，绝大多数制造商都直接将裸片做到板子上。——百度百科

LCD1602有2行，每行可以显示16个字符，每个字符由5*10或5*7的点阵组成，字符与字符之间，行与行之间都有一个点列的距离，因此不易于显示图片，中文。 __另外lcd1602是对ASCII码的显示！__
### 二、管脚结构
[![](http://112.124.31.67/wp-content/uploads/2020/07/wp_editor_md_659b7b8e6afa1731f05b817be7b2e26a.jpg)](http://112.124.31.67/wp-content/uploads/2020/07/wp_editor_md_659b7b8e6afa1731f05b817be7b2e26a.jpg)
### 三、操作步骤
操作大致分为三步：
1. 初始化
2. 写命令（RS=L） 设置显示坐标
3. 写数据（RS=H）

####  1.LCD1602关键性的指令设置

>清屏指令 0x01

|指令功能|指令编码 | 指令编码|指令编码 | 指令编码|指令编码  | 指令编码  | 指令编码  | 指令编码  | 指令编码  | 指令编码  | 执行时间/ms  |
| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
|   | RS  | R/W  | DB7  |DB6   | DB5  |DB4   | DB3  | DB2  | DB1  |DB0   |   |
|  清屏 |  0 | 0  |  0 |  0 |  0 |  0 |  0 |  0 |  0 | 1  | 1.64  |

功能：
1. 清除液晶显示器，将DDRAM的内容全部填入空白的ASCII码20H
2. 光标归位，撤回显示屏左上方
3. 将地址计数器（AC）的值设置为0

>进入模式设置指令  eg.0x06光标右移屏幕不动

|指令功能|指令编码 | 指令编码|指令编码 | 指令编码|指令编码  | 指令编码  | 指令编码  | 指令编码  | 指令编码  | 指令编码  | 执行时间/us  |
| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
|   | RS  | R/W  | DB7  |DB6   | DB5  |DB4   | DB3  | DB2  | DB1  |DB0   |   |
|  进入指令设置模式 |  0 | 0  |  0 |  0 |  0 |  0 |  0 |  1 |  I/D | S  | 40  |

功能：
设定每次定入一位数据后光标的移动方向，并且设定每次写入一个字符是否移动，参数设定情况如下：
* I/D 若为0，则写入新数据后光标左移 若为1则写入新数据后光标右移
* S 若为0写入新数据后显示屏不移动，若为1写入新数据后显示屏整体右移一个字符

>显示开关控制指令 eg.0x0c光标不显示不闪烁

|指令功能|指令编码 | 指令编码|指令编码 | 指令编码|指令编码  | 指令编码  | 指令编码  | 指令编码  | 指令编码  | 指令编码  | 执行时间/us  |
| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
|   | RS  | R/W  | DB7  |DB6   | DB5  |DB4   | DB3  | DB2  | DB1  |DB0   |   |
|  显示开关控制 |  0 | 0  |  0 |  0 |  0 |  0 |  1 |  D |  C | B  | 40  |

功能：
控制显示器开关、光标显示/关闭以及光标是否闪烁。参数设定如下：
* D 为0则显示功能关 为1则显示功能开
* C 为0则光标关 为1则光标开
* B 为0则光标闪烁 为1则光标不闪烁

>功能设定指令 eg.0x38 数据总线8位2行5*7

|指令功能|指令编码 | 指令编码|指令编码 | 指令编码|指令编码  | 指令编码  | 指令编码  | 指令编码  | 指令编码  | 指令编码  | 执行时间/us  |
| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
|   | RS  | R/W  | DB7  |DB6   | DB5  |DB4   | DB3  | DB2  | DB1  |DB0   |   |
|  功能设定 |  0 | 0  |  0 |  0 |  1 |  DL |  N |  F |  X | X  | 40  |

功能：
设定数据总线位数，显示行数及字型。参数设定如下：
* DL 若为0数据总线为4位，若为1数据总线为8位。
* N 0=显示1行，1=显示2行
* F 0=5\*7点阵/字符 1=5\*10点阵/字符

#### 2.液晶模块的显示

>DDRAM：
DDRAM就是显示数据的RAM,用来寄存待显示的字符代码。共80个字节，其地址和屏幕的对应关系如下：

|   |显示位置|  1 | 2  | 3  | 4  |5   | 6  |  7 | ...  |  40 |
| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
| DDRAM地址  | 第一行  | 00H  |01H   | 02H  |03H   |04H   |05H   |06H   |  ... |  27H |
|   |  第二行 | 40H  | 41H  |42H   |  43H |44H   | 45H  | 47H  |...   | 67H  |

要显示字符时要先输入显示字符的地址，也就是告诉模块在哪里显示字符，例如第二行第一个字符的地址是40H，那是否只需要写入40h就行了？NO,因为写入显示地址时要求最高位D7时刻保持为高电平1，所以实际写入的数据应该是：
`0100 0000(40H)|1000 0000（80H）=1100 0000(C0H)`

由于1602每行只显示16个字符，因此我们只需要用到16个字节，第二行也一样：
[![](http://112.124.31.67/wp-content/uploads/2020/07/wp_editor_md_e52954c3167cf2c42f864d87c32e2eeb.jpg)](http://112.124.31.67/wp-content/uploads/2020/07/wp_editor_md_e52954c3167cf2c42f864d87c32e2eeb.jpg)

#### 3.实际操作
主函数框架：
~~~c
void main(){
	u8 i;
	LcdInit();//lcd初始化
	LcdWriteData(string)//string是要显示的内容(可以是一整句话，用字符串保存，然后用循环显示每一个字节)
	while(1);
}
~~~

>1.先宏定义需要用到的i/o口
~~~c
#define LCD1602_DATAPINS P0

sbit LCD1602_E=P2^7;
sbit LCD1602_RS=P2^6;
sbit LCD1602_RW=P2^5;
~~~

>2. 编写写函数

写命令函数：
~~~c
#ifndef LCD1602_4PINS
void LcdWriteCom(uchar com){
	LCD1602_E=0;//使能端拉低
	LCD1602_RS=0;//RS为0，进入命令模式
	LCD1602_RW=0;//RW为0，写命令模式

	LCD1602_DATAPINS = com;//传入命令
	Lcd1602_delay1ms(1);//延时等待反应
	
	LCD1602_E = 1;//使能拉高开始读取信息
	Lcd1602_delay1ms(5);
	LCD1602_E = 0;//使能端拉低开始执行命令
}
#else 
void LcdWriteCom(uchar com){
	LCD1602_E=0;
	LCD1602_RS=0;
	LCD1602_RW=0;

	LCD1602_DATAPINS = com;
	Lcd1602_delay1ms(1);¨
	
	LCD1602_E = 1;
	Lcd1602_Delay1ms(5);
	LCD1602_E = 0;
	
	LCD1602_DATAPINS = com << 4;
	Lcd1602_delay1ms(1);
	
	LCD1602_E = 1;
	Lcd1602_delay1ms(5);
	LCD1602_E = 0;
	
}
#endif
~~~~

写数据函数：
~~~c
#ifndef LCD1602_4PINS
void LcdWriteData(uchar dat){
	LCD1602_E = 0;//使能端拉低
	LCD1602_RS = 1;//RS为1，进入数据模式
	LCD1602_RW = 0;//RW为0，为写数据模式

	LCD1602_DATAPINS = dat;//传入数据
	Lcd1602_delay1ms(1);

	LCD1602_E = 1;//使能拉高读数据
	Lcd1602_delay1ms(5);
	LCD1602_E = 0;//使能拉低显示数据
}
#else
void LcdWriteData(uchar dat)
{
	LCD1602_E = 0;
	LCD1602_RS = 1;
	LCD1602_RW = 0;

	LCD1602_DATAPINS = dat;
	Lcd1602_delay1ms(1);

	LCD1602_E = 1;
	Lcd1602_delay1ms(5);
	LCD1602_E = 0;

	LCD1602_DATAPINS = dat << 4;
	Lcd1602_delay1ms(1);

	LCD1602_E = 1;
	Lcd1602_delay1ms(5);
	LCD1602_E = 0;
}
#endif
~~~

初始化函数：
~~~c
#ifndef LCD1602_4PINS
void LcdInit()
{
 	LcdWriteCom(0x38);//8位数据传输，2行，5*7显示模式
	LcdWriteCom(0x0c);//光标不显示，不闪烁
	LcdWriteCom(0x06);//显示一个字符后光标右移屏幕不动
	LcdWriteCom(0x01);//清屏指令
	LcdWriteCom(0x80);//光标回到左上角
}
#else
void LcdInit()						  //LCD³õÊ¼»¯×Ó³ÌÐò
{
	LcdWriteCom(0x32);
	LcdWriteCom(0x28);
	LcdWriteCom(0x0c);
	LcdWriteCom(0x06);
	LcdWriteCom(0x01);
	LcdWriteCom(0x80);
}
#endif
~~~

#### 4.自定义字符

HD44780内置了192个字符，存放于字符产生器CGROM（Character Generator ROM）中，另外还有8个可供用户自定义的字符区域，称为CGRAM（Character Generator RAM）。

>LCD1602的内部字库

[![](http://112.124.31.67/wp-content/uploads/2020/07/wp_editor_md_eb76f1315a4d9c48d00f8de5cd688bd8.jpg)](http://112.124.31.67/wp-content/uploads/2020/07/wp_editor_md_eb76f1315a4d9c48d00f8de5cd688bd8.jpg)

我们的PC之所以可以显示一个字符，是因为在系统或者BISO里面有固化字符字模，字模使用来表示一个字符在一片点阵里面，哪些要亮，哪些不用亮的信息数据，比如
~~~c
01110		□■■■□
10001		■□□□■
10001		■□□□■
11111		■■■■■
10001		■□□□■
10001		■□□□■
~~~
就表示A这个字符的点阵，并且将A用41H（0100 0001）表示，PC收到41H的指令后，就去字模库里面调取A的点阵显示方式，然后屏幕上显示出A。

而在LCD1602中一样是这样设计的，因此在编译c文件时，PC会把‘A’转译成41H，而碰巧LCD1602读地懂41H，因此它也去它的CGROM里面调取了A的字模点阵，然后显示。

*2020/7/7 11：35*







